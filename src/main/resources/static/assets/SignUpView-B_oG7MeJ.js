import{_ as O,r as w,B as J,C as K,c as Q,b as X,d as e,s as Y,f as ee,w as se,v as r,x as d,p as a,D as u,z as n,t as p,a as x,h as ae,i as oe,l as te,u as le}from"./index-DXYtudQ_.js";import{c as re,a as c,b as de,u as ne,d as m}from"./index.esm-CYe1cFEz.js";const ie={class:"singUpContainer"},ue={class:"contentWrapper"},pe={class:"formContainer"},ce={class:"buttonContainer"},me={class:"cancelButton"},ve={class:"inputContainer"},he={id:"idCheckLabel",class:"idCheckLabel"},we={class:"passwordContainer"},be={id:"pwCheckLabel",class:"pwCheckLabel"},ge={class:"passwordCheckContainer"},_e={id:"pwCheckLabel2",class:"pwCheckLabel"},Ce={class:"nameContainer"},ke={id:"userNameCheckLabel",class:"userNameCheckLabel"},ye={class:"phoneContainer"},Me={class:"phoneCheckLabel"},Ue={class:"emailContainer"},fe={id:"emailCheckLabel",class:"emailCheckLabel"},Le={class:"addressContainer"},Ve={class:"addrBox"},Be={class:"addressCheckLabel"},Ie={class:"genderMaleContainer"},De=["checked"],$e={class:"genderFemaleContainer"},Ee=["checked"],Ne={__name:"SignUpView",setup(xe){const P=le(),i=w("M"),k=w(""),y=w(""),V=w(!1),B=w(null),S=J(),M=K(),I=Q(()=>`${h.value} ${k.value}`),F=re({userName:c().matches(/^[가-힣a-zA-Z]{2,15}$/,"* 이름은 한글 또는 영문 2~15자여야 합니다.").required("* 이름은 필수 항목입니다."),email:c().matches(/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/,"* 올바른 이메일 주소를 입력해주세요.").required("* 이메일을 입력해주세요"),phone:c().matches(/^(010|011|016|070)\d{7,8}$/,"* 유효한 전화번호 형식이 아닙니다.").required("* 전화번호는 필수 항목입니다."),userUuid:c().matches(/^[a-zA-Z0-9]{6,12}$/,"* 6~12자 영문 대소문자, 숫자만 입력하세요.").required("* 아이디는 필수 입력 항목입니다."),password:c().matches(/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{8,16}$/,"* 8-16자 이내 영문자, 숫자, 특수문자를 모두 포함해야 합니다.").required("* 비밀번호는 필수 항목입니다."),repeatPassword:c().oneOf([de("password")],"* 비밀번호가 일치하지 않습니다.").required("* 비밀번호 확인은 필수 항목입니다."),user_address:c().required("* 주소는 필수 입력 항목입니다.")}),{validate:z,errors:U}=ne({validationSchema:F}),{value:b,errorMessage:D}=m("userName"),{value:g,errorMessage:q}=m("email"),{value:_,errorMessage:$}=m("phone"),{value:h,errorMessage:E}=m("user_address"),{value:v,errorMessage:f}=m("userUuid"),{value:C,errorMessage:A}=m("password"),{value:L,errorMessage:N}=m("repeatPassword"),W=()=>{console.log("userUuidError",f.value),!f.value&&v.value!=null?Z(v.value):M.showModal("회원가입","아이디를 올바르게 입력해주세요.","입력된 아이디가 없습니다.","확인")},Z=async l=>{try{const s=await x.get(`/api/users/check-id?userUuid=${l}`).then(t=>{console.log(t),S.showModal("회원가입","사용가능한 아이디입니다.")}).catch(t=>{console.log(t),M.showModal("회원가입","아이디를 올바르게 입력해주세요.","중복된 아이디","확인")})}catch{console.error(),alert("중복확인 에러")}},j=async()=>{if(!await z()){console.log("유효성 검사 실패");return}console.log(" total_address",I.value);try{const s=await x.post("/api/auth/signup",{userName:b.value,password:C.value,userUuid:v.value,phone:_.value,email:g.value,gender:i.value,address:I.value,birthDate:y.value}).then(t=>{console.log("res",t)});P.push("/auth/login")}catch{console.error(),M.showModal("회원가입","회원가입에 실패했습니다..","오류발생","확인")}},G=()=>{i.value="F",console.log(i.value)},R=()=>{i.value="M",console.log(i.value)},T=()=>new Promise((l,s)=>{if(document.getElementById("daum-postcode-script")){l();return}const t=document.createElement("script");t.src="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js",t.id="daum-postcode-script",t.async=!0,t.onload=()=>{console.log("Daum Postcode script loaded"),l()},t.onerror=()=>s(new Error("Failed to load Daum Postcode script")),document.body.appendChild(t)}),H=()=>{T().then(()=>{new window.daum.Postcode({oncomplete:l=>{console.log("user_address:",l.address),h.value=l.address,B.value.focus()}}).open()}).catch(l=>{console.error(l.message)})};return(l,s)=>{const t=ae("router-link");return oe(),X("div",ie,[e("div",ue,[s[20]||(s[20]=e("div",{class:"titleHeader"},[e("div",{class:"title"},"회원가입"),e("div",{class:"separator"})],-1)),e("div",pe,[e("form",{onSubmit:Y(j,["prevent"]),id:"signUpForm"},[e("div",ce,[s[11]||(s[11]=e("button",{type:"submit",class:"signupButton",id:"signupButton"}," 회원가입 ",-1)),e("div",me,[ee(t,{to:"/auth/login"},{default:se(()=>s[10]||(s[10]=[te("취소하기")])),_:1})])]),e("div",ve,[s[12]||(s[12]=e("div",{class:"label"},"아이디",-1)),r(e("input",{id:"userUuid",type:"text",name:"userUuid","onUpdate:modelValue":s[0]||(s[0]=o=>u(v)?v.value=o:null),class:n(["inputField",{"error-input":a(f)}]),placeholder:"아이디를 입력하세요."},null,2),[[d,a(v)]]),e("button",{type:"button",id:"duplicateCheckButton",class:"duplicateCheckButton",onClick:W}," 중복확인 "),e("label",he,p(a(U).userUuid),1)]),e("div",we,[s[13]||(s[13]=e("div",{class:"passwordLabel"},"비밀번호",-1)),r(e("input",{type:"password",id:"password",name:"password","onUpdate:modelValue":s[1]||(s[1]=o=>u(C)?C.value=o:null),class:n(["passwordInput",{"error-input":a(A)}]),placeholder:"비밀번호 영문/특수문자/숫자 8~16자"},null,2),[[d,a(C)]]),e("label",be,p(a(U).password),1)]),e("div",ge,[s[14]||(s[14]=e("div",{class:"passwordLabel"},"비밀번호 확인",-1)),r(e("input",{type:"password","onUpdate:modelValue":s[2]||(s[2]=o=>u(L)?L.value=o:null),class:n(["passwordInput",{"error-input":a(N)}]),placeholder:"비밀번호를 재입력해주세요."},null,2),[[d,a(L)]]),e("label",_e,p(a(N)),1)]),e("div",Ce,[s[15]||(s[15]=e("div",{class:"nameLabel"},"이름",-1)),r(e("input",{type:"text",id:"userName","onUpdate:modelValue":s[3]||(s[3]=o=>u(b)?b.value=o:null),name:"userName",class:n(["nameInput",{"error-input":a(D)}]),placeholder:"이름을 입력하세요."},null,2),[[d,a(b)]]),e("label",ke,p(a(D)),1)]),e("div",ye,[s[16]||(s[16]=e("div",{class:"phoneLabel"},"휴대폰 번호",-1)),r(e("input",{type:"",id:"phone","onUpdate:modelValue":s[4]||(s[4]=o=>u(_)?_.value=o:null),name:"phone",class:n(["nameInput",{"error-input":a($)}]),placeholder:"-없이 휴대폰 번호를 입력하세요."},null,2),[[d,a(_)]]),e("label",Me,p(a($)),1)]),s[17]||(s[17]=e("div",{class:"emailLabel"},"이메일 주소",-1)),e("div",Ue,[r(e("input",{type:"email",id:"email",name:"email",class:n(["emailInput",{"error-input":a(q)}]),placeholder:"이메일주소","onUpdate:modelValue":s[5]||(s[5]=o=>u(g)?g.value=o:null)},null,2),[[d,a(g)]]),e("label",fe,p(a(U).email),1)]),s[18]||(s[18]=e("div",{class:"addressLabel"},"주소 정보",-1)),e("div",Le,[e("div",Ve,[e("div",{id:"addressSearch",class:"postcodeInputBtn",onClick:H}," 주소검색 "),r(e("input",{type:"text",class:n(["addressInput",{"error-input":a(E)}]),id:"user_address","onUpdate:modelValue":s[6]||(s[6]=o=>u(h)?h.value=o:null),name:"user_address",placeholder:"주소",readonly:""},null,2),[[d,a(h)]])]),r(e("input",{type:"text",id:"user_detail_address",ref_key:"user_detail_address_input",ref:B,"onUpdate:modelValue":s[7]||(s[7]=o=>k.value=o),class:"detailedAddressInput",placeholder:"상세주소"},null,512),[[d,k.value]]),r(e("input",{type:"text",id:"user_total_address",name:"address","onUpdate:modelValue":s[8]||(s[8]=o=>l.address=o),style:{display:"none"}},null,512),[[d,l.address]]),e("label",Be,p(a(E)),1)]),s[19]||(s[19]=e("div",{class:"birthdateLabel"},"생년월일",-1)),r(e("input",{type:"date",id:"birthDate","onUpdate:modelValue":s[9]||(s[9]=o=>y.value=o),class:"birthdateInput",name:"birthDate",placeholder:"생년월일 6자리를 입력하세요."},null,512),[[d,y.value]]),e("div",Ie,[e("input",{type:"radio",name:"gender",class:"hidden-input",checked:V.value,value:"M",id:"genderInputMan"},null,8,De),e("div",{class:n(["genderMaleButton","genderBtn",{"checked-option":i.value==="M"}]),onClick:R}," Man ",2)]),e("div",$e,[e("input",{type:"radio",name:"gender",class:"hidden-input",checked:V.value,value:"F",id:"genderInputWoman"},null,8,Ee),e("div",{class:n(["genderFemaleButton","genderBtn",{"checked-option":i.value==="F"}]),onClick:G}," Woman ",2)])],32)])])])}}},Fe=O(Ne,[["__scopeId","data-v-1c41b76c"]]);export{Fe as default};
