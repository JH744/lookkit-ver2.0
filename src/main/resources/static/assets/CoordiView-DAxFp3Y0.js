import{_ as v,j as f,u as B,r as d,c as P,o as I,i as u,b as m,d as e,t as g,p as h,m as S,a as _,F as q,g as L,q as R,n as U}from"./index-D7Zkuw6m.js";import{h as $,a as b}from"./heart2-Da8ksjVI.js";import{d as V}from"./img_none-DejiioVZ.js";const E={class:"codi-item"},T=["src","alt"],D={class:"codi-info"},F={class:"codi-name"},W={class:"codi-price"},j=["src"],A={__name:"Coordi",props:{codiId:{type:Number,required:!0},codiName:{type:String,required:!0},codiPrice:{type:Number,required:!0},codiThumbnail:{type:String,required:!0},imageBaseUrl:{type:String,default:"https://firebasestorage.googleapis.com/v0/b/test-24a07.appspot.com/o/lookkit"}},setup(a){const s=f(),p=B(),i=$,n=b,t=d(!1),l=a,k=P(()=>{const o=`/codi/0${l.codiId}`,c=`/${l.codiId}_thumbnail.webp`,r=`${encodeURIComponent(o)}${encodeURIComponent(c)}`;return`${l.imageBaseUrl}${r}?alt=media`}),y=()=>{p.push(`/codi/${l.codiId}`)},C=o=>o.toLocaleString("ko-KR"),N=o=>{o.target.src=V},w=async o=>{console.log("코디 좋아요 추가");try{const c=await _.post("/api/main/coordi/wish/add",{userId:s.user.userId,codiId:o}).then(r=>{console.log("data",r)}).catch(r=>{console.log(r)});console.log("respnonse",c),t.value=!0}catch{}},x=async()=>{try{const o=await _.get(`/api/main/checkBatchCodi/${s.user.userId}/${l.codiId}`);t.value=o.data}catch(o){console.error("위시리스트 체크 중 오류 발생:",o)}};return I(()=>{s.isLoggedIn&&x()}),(o,c)=>(u(),m("div",E,[e("div",{class:"codi-image",onClick:y},[e("img",{src:k.value,alt:a.codiName,onError:N},null,40,T)]),e("div",D,[e("h3",F,g(a.codiName),1),e("p",W,g(C(a.codiPrice))+"원",1)]),e("div",null,[h(s).isLoggedIn?(u(),m("img",{key:0,src:t.value?h(i):h(n),class:"like-btn",onClick:c[0]||(c[0]=r=>w(a.codiId)),width:"20px",height:"20px",alt:""},null,8,j)):S("",!0)])]))}},K=v(A,[["__scopeId","data-v-ffb9d202"]]),M={class:"page-container"},z={class:"title-section"},G={class:"sort-section"},H={class:"item-count"},J={class:"main-content"},O={class:"product-list"},Q={__name:"CoordiView",setup(a){f();const s=d([]);U(),d("https://firebasestorage.googleapis.com/v0/b/test-24a07.appspot.com/o/lookkit"),d($),d(b),d([]);const p=async()=>{try{const{data:i}=await _.get("/api/main/codis/all");console.log("리스트",i),s.value=i}catch(i){console.error("상품 데이터 조회 오류 발생:",i)}};return I(()=>{p()}),(i,n)=>(u(),m("div",M,[e("div",z,[n[0]||(n[0]=e("h1",{class:"title-text"},"전체 코디",-1)),n[1]||(n[1]=e("div",{class:"filter-section"},null,-1)),e("div",G,[e("div",H,"코디수: "+g(s.value.length)+"개",1)])]),e("div",J,[e("div",O,[(u(!0),m(q,null,L(s.value,t=>(u(),R(K,{key:t.codiId,"codi-id":t.codiId,"codi-name":t.codiName,"codi-thumbnail":t.codiThumbnail,"codi-price":t.codiPrice},null,8,["codi-id","codi-name","codi-thumbnail","codi-price"]))),128))])])]))}},ee=v(Q,[["__scopeId","data-v-1565239e"]]);export{ee as default};
