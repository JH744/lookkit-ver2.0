import{a as L}from"./axios-ywBQ3a9P.js";import{i as b,p as m,_ as $,r as d,o as P,a as c,b as t,z as _,t as a,F as k,f as v,h as r,n as I}from"./index-BBnxBt67.js";import{r as S,f as U,g as W}from"./firebaseConfig-Cr89vwH1.js";const x=b(),f=async e=>{try{if(e.isLiked)await m.delete(`http://localhost:8081/api/mypage/wishlist/${e.wishlistId}`),e.isLiked=!1,e.likeCount--;else{const o=await m.post(`http://localhost:8081/api/mypage/wishlist/${x.user.userId}`,{productId:e.productId,codiId:e.codiId});e.isLiked=!0,e.likeCount=o.data.data.likeCount,e.wishlistId=o.data.data.wishlistId}}catch(o){console.error("Error toggling like:",o)}},N={class:"wishlist-container"},B={class:"tabs"},D={key:0,class:"wishlist-grid"},E=["src"],F={class:"wishlist-brand"},R={class:"wishlist-name"},z={class:"wishlist-price"},A={class:"wishlist-likes"},K=["src","onClick"],M={key:1,class:"wishlist-grid"},T=["src"],V={class:"wishlist-brand"},j={class:"wishlist-name"},q={class:"wishlist-price"},G={class:"wishlist-likes"},H=["src","onClick"],J={__name:"WishList",setup(e){const o=d("codi"),w=b(),n=d([]),u=d([]),p=d([]);function g(i){return i.toLocaleString("ko-KR")}const y=async i=>{const l=i.productId?`lookkit/products/0${i.productId}/${i.productId}_thumbnail.webp`:`lookkit/codi/0${i.codiId}/${i.codiId}_thumbnail.webp`;try{const s=S(U,l),h=await W(s);i.thumbnailUrl=h}catch(s){console.error(`이미지 로드 실패: ${l}`,s),i.thumbnailUrl="/images/placeholder.png"}},C=async()=>{try{const i=await L.get(`/api/mypage/wishlist/${w.user.userId}`);n.value=i.data.data.map(s=>({...s,isLiked:!0,thumbnailUrl:""})),u.value=n.value.filter(s=>s.productId),p.value=n.value.filter(s=>s.codiId);const l=n.value.map(s=>y(s));await Promise.all(l)}catch(i){console.error("Error loading wishlist:",i)}};return P(()=>{C()}),(i,l)=>(r(),c("div",N,[t("div",B,[t("button",{class:_({active:o.value==="codi"}),onClick:l[0]||(l[0]=s=>o.value="codi")}," Codi ("+a(p.value.length)+") ",3),t("button",{class:_({active:o.value==="product"}),onClick:l[1]||(l[1]=s=>o.value="product")}," Product ("+a(u.value.length)+") ",3)]),o.value==="codi"?(r(),c("div",D,[(r(!0),c(k,null,v(p.value,s=>(r(),c("div",{class:"wishlist-item",key:"codi-"+s.codiId},[t("img",{class:"wishlist-image",src:s.thumbnailUrl||"/images/placeholder.png",alt:"Codi Image"},null,8,E),t("h3",F,a(s.codiName),1),t("p",R,a(s.codiDescription),1),t("p",z,a(g(s.codiPrice))+" 원",1),t("div",A,[t("img",{class:"like-icon",src:s.isLiked?"/images/like.png":"/images/dislike.png",alt:"Like Icon",onClick:h=>I(f)(s)},null,8,K),t("span",null,a(s.likeCount),1)])]))),128))])):(r(),c("div",M,[(r(!0),c(k,null,v(u.value,s=>(r(),c("div",{class:"wishlist-item",key:"product-"+s.productId},[t("img",{class:"wishlist-image",src:s.thumbnailUrl||"/images/placeholder.png",alt:"Product Image"},null,8,T),t("h3",V,a(s.brandName),1),t("p",j,a(s.productName),1),t("p",q,a(g(s.productPrice))+" 원",1),t("div",G,[t("img",{class:"like-icon",src:s.isLiked?"/images/like.png":"/images/dislike.png",alt:"Like Icon",onClick:h=>I(f)(s)},null,8,H),t("span",null,a(s.likeCount),1)])]))),128))]))]))}},Y=$(J,[["__scopeId","data-v-931a6041"]]);export{Y as default};
