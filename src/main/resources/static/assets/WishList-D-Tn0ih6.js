import{j as f,a as g,_ as L,r as d,o as $,b as c,d as t,z as _,t as o,F as k,g as v,i as r,p as I}from"./index-D656lRRA.js";import{r as P,f as S,g as U}from"./firebaseConfig-Cr89vwH1.js";const W=f(),b=async i=>{try{if(i.isLiked)await g.delete(`/api/mypage/wishlist/${i.wishlistId}`),i.isLiked=!1,i.likeCount--;else{const a=await g.post(`/api/mypage/wishlist/${W.user.userId}`,{productId:i.productId,codiId:i.codiId});i.isLiked=!0,i.likeCount=a.data.data.likeCount,i.wishlistId=a.data.data.wishlistId}}catch(a){console.error("Error toggling like:",a)}},N={class:"wishlist-container"},x={class:"tabs"},B={key:0,class:"wishlist-grid"},D=["src"],E={class:"wishlist-brand"},F={class:"wishlist-name"},R={class:"wishlist-price"},z={class:"wishlist-likes"},j=["src","onClick"],A={key:1,class:"wishlist-grid"},K=["src"],M={class:"wishlist-brand"},T={class:"wishlist-name"},V={class:"wishlist-price"},q={class:"wishlist-likes"},G=["src","onClick"],H={__name:"WishList",setup(i){const a=d("codi"),w=f(),n=d([]),u=d([]),p=d([]);function m(e){return e.toLocaleString("ko-KR")}const y=async e=>{const l=e.productId?`lookkit/products/0${e.productId}/${e.productId}_thumbnail.webp`:`lookkit/codi/0${e.codiId}/${e.codiId}_thumbnail.webp`;try{const s=P(S,l),h=await U(s);e.thumbnailUrl=h}catch(s){console.error(`이미지 로드 실패: ${l}`,s),e.thumbnailUrl="/images/placeholder.png"}},C=async()=>{try{const e=await g.get(`/api/mypage/wishlist/${w.user.userId}`);n.value=e.data.data.map(s=>({...s,isLiked:!0,thumbnailUrl:""})),u.value=n.value.filter(s=>s.productId),p.value=n.value.filter(s=>s.codiId);const l=n.value.map(s=>y(s));await Promise.all(l)}catch(e){console.error("Error loading wishlist:",e)}};return $(()=>{C()}),(e,l)=>(r(),c("div",N,[t("div",x,[t("button",{class:_({active:a.value==="codi"}),onClick:l[0]||(l[0]=s=>a.value="codi")}," Codi ("+o(p.value.length)+") ",3),t("button",{class:_({active:a.value==="product"}),onClick:l[1]||(l[1]=s=>a.value="product")}," Product ("+o(u.value.length)+") ",3)]),a.value==="codi"?(r(),c("div",B,[(r(!0),c(k,null,v(p.value,s=>(r(),c("div",{class:"wishlist-item",key:"codi-"+s.codiId},[t("img",{class:"wishlist-image",src:s.thumbnailUrl||"/images/placeholder.png",alt:"Codi Image"},null,8,D),t("h3",E,o(s.codiName),1),t("p",F,o(s.codiDescription),1),t("p",R,o(m(s.codiPrice))+" 원",1),t("div",z,[t("img",{class:"like-icon",src:s.isLiked?"/images/like.png":"/images/dislike.png",alt:"Like Icon",onClick:h=>I(b)(s)},null,8,j),t("span",null,o(s.likeCount),1)])]))),128))])):(r(),c("div",A,[(r(!0),c(k,null,v(u.value,s=>(r(),c("div",{class:"wishlist-item",key:"product-"+s.productId},[t("img",{class:"wishlist-image",src:s.thumbnailUrl||"/images/placeholder.png",alt:"Product Image"},null,8,K),t("h3",M,o(s.brandName),1),t("p",T,o(s.productName),1),t("p",V,o(m(s.productPrice))+" 원",1),t("div",q,[t("img",{class:"like-icon",src:s.isLiked?"/images/like.png":"/images/dislike.png",alt:"Like Icon",onClick:h=>I(b)(s)},null,8,G),t("span",null,o(s.likeCount),1)])]))),128))]))]))}},Q=L(H,[["__scopeId","data-v-320ecc66"]]);export{Q as default};
