import{_ as T,r as g,q as H,c as O,b as e,g as J,k as K,l as Q,h as r,v as d,s as a,t as u,n,x as p,m as X,o as Y,d as ee,p as se}from"./index-TG6V28-U.js";import{a as E}from"./axios-CCb-kr4I.js";import{c as ae,a as c,b as oe,u as te,d as m}from"./index.esm-ijw9gT_z.js";const le={class:"singUpContainer"},re={class:"contentWrapper"},de={class:"formContainer"},ne={class:"buttonContainer"},ie={class:"cancelButton"},ue={class:"inputContainer"},pe={id:"idCheckLabel",class:"idCheckLabel"},ce={class:"passwordContainer"},me={id:"pwCheckLabel",class:"pwCheckLabel"},ve={class:"passwordCheckContainer"},he={id:"pwCheckLabel2",class:"pwCheckLabel"},ge={class:"nameContainer"},be={id:"userNameCheckLabel",class:"userNameCheckLabel"},we={class:"phoneContainer"},_e={class:"phoneCheckLabel"},Ce={class:"emailContainer"},ke={id:"emailCheckLabel",class:"emailCheckLabel"},ye={class:"addressContainer"},Ue={class:"addrBox"},fe={class:"addressCheckLabel"},Le={class:"genderMaleContainer"},Me=["checked"],Ve={class:"genderFemaleContainer"},Be=["checked"],Ie={__name:"SignUpView",setup($e){const N=se(),i=g("M"),k=g(""),y=g(""),M=g(!1),V=g(null),B=H(()=>`${h.value} ${k.value}`),P=ae({userName:c().matches(/^[가-힣a-zA-Z]{2,15}$/,"* 이름은 한글 또는 영문 2~15자여야 합니다.").required("* 이름은 필수 항목입니다."),email:c().matches(/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/,"* 올바른 이메일 주소를 입력해주세요.").required("* 이메일을 입력해주세요"),phone:c().matches(/^(010|011|016|070)\d{7,8}$/,"* 유효한 전화번호 형식이 아닙니다.").required("* 전화번호는 필수 항목입니다."),userUuid:c().matches(/^[a-zA-Z0-9]{6,12}$/,"* 6~12자 영문 대소문자, 숫자만 입력하세요.").required("* 아이디는 필수 입력 항목입니다."),password:c().matches(/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{8,16}$/,"* 8-16자 이내 영문자, 숫자, 특수문자를 모두 포함해야 합니다.").required("* 비밀번호는 필수 항목입니다."),repeatPassword:c().oneOf([oe("password")],"* 비밀번호가 일치하지 않습니다.").required("* 비밀번호 확인은 필수 항목입니다."),user_address:c().required("* 주소는 필수 입력 항목입니다.")}),{validate:F,errors:U}=te({validationSchema:P}),{value:b,errorMessage:I}=m("userName"),{value:w,errorMessage:q}=m("email"),{value:_,errorMessage:$}=m("phone"),{value:h,errorMessage:x}=m("user_address"),{value:v,errorMessage:f}=m("userUuid"),{value:C,errorMessage:z}=m("password"),{value:L,errorMessage:D}=m("repeatPassword"),S=()=>{console.log("userUuidError",f.value),!f.value&&v.value!=null?A(v.value):alert("아이디를 올바르게 입력해주세요")},A=async l=>{try{const s=await E.get(`http://localhost:8081/api/users/check-id?userUuid=${l}`).then(t=>{console.log(t),alert("사용가능한 아이디입니다.")}).catch(t=>{console.log(t),alert("중복되는 아이디입니다.")})}catch{console.error(),alert("중복확인 에러")}},W=async()=>{if(!await F()){console.log("유효성 검사 실패");return}console.log(" total_address",B.value);try{const s=await E.post("http://localhost:8081/api/auth/signup",{userName:b.value,password:C.value,userUuid:v.value,phone:_.value,email:w.value,gender:i.value,address:B.value,birthDate:y.value}).then(t=>{console.log("res",t)});N.push("/auth/login")}catch{console.error(),alert("회원가입에 실패하였습니다.")}},Z=()=>{i.value="F",console.log(i.value)},j=()=>{i.value="M",console.log(i.value)},G=()=>new Promise((l,s)=>{if(document.getElementById("daum-postcode-script")){l();return}const t=document.createElement("script");t.src="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js",t.id="daum-postcode-script",t.async=!0,t.onload=()=>{console.log("Daum Postcode script loaded"),l()},t.onerror=()=>s(new Error("Failed to load Daum Postcode script")),document.body.appendChild(t)}),R=()=>{G().then(()=>{new window.daum.Postcode({oncomplete:l=>{console.log("user_address:",l.address),h.value=l.address,V.value.focus()}}).open()}).catch(l=>{console.error(l.message)})};return(l,s)=>{const t=X("router-link");return Y(),O("div",le,[e("div",re,[s[20]||(s[20]=e("div",{class:"titleHeader"},[e("div",{class:"title"},"회원가입"),e("div",{class:"separator"})],-1)),e("div",de,[e("form",{onSubmit:J(W,["prevent"]),id:"signUpForm"},[e("div",ne,[s[11]||(s[11]=e("button",{type:"submit",class:"signupButton",id:"signupButton"}," 회원가입 ",-1)),e("div",ie,[K(t,{to:"/auth/login"},{default:Q(()=>s[10]||(s[10]=[ee("취소하기")])),_:1})])]),e("div",ue,[s[12]||(s[12]=e("div",{class:"label"},"아이디",-1)),r(e("input",{id:"userUuid",type:"text",name:"userUuid","onUpdate:modelValue":s[0]||(s[0]=o=>u(v)?v.value=o:null),class:n(["inputField",{"error-input":a(f)}]),placeholder:"아이디를 입력하세요."},null,2),[[d,a(v)]]),e("button",{type:"button",id:"duplicateCheckButton",class:"duplicateCheckButton",onClick:S}," 중복확인 "),e("label",pe,p(a(U).userUuid),1)]),e("div",ce,[s[13]||(s[13]=e("div",{class:"passwordLabel"},"비밀번호",-1)),r(e("input",{type:"password",id:"password",name:"password","onUpdate:modelValue":s[1]||(s[1]=o=>u(C)?C.value=o:null),class:n(["passwordInput",{"error-input":a(z)}]),placeholder:"비밀번호 영문/특수문자/숫자 8~16자"},null,2),[[d,a(C)]]),e("label",me,p(a(U).password),1)]),e("div",ve,[s[14]||(s[14]=e("div",{class:"passwordLabel"},"비밀번호 확인",-1)),r(e("input",{type:"password","onUpdate:modelValue":s[2]||(s[2]=o=>u(L)?L.value=o:null),class:n(["passwordInput",{"error-input":a(D)}]),placeholder:"비밀번호를 재입력해주세요."},null,2),[[d,a(L)]]),e("label",he,p(a(D)),1)]),e("div",ge,[s[15]||(s[15]=e("div",{class:"nameLabel"},"이름",-1)),r(e("input",{type:"text",id:"userName","onUpdate:modelValue":s[3]||(s[3]=o=>u(b)?b.value=o:null),name:"userName",class:n(["nameInput",{"error-input":a(I)}]),placeholder:"이름을 입력하세요."},null,2),[[d,a(b)]]),e("label",be,p(a(I)),1)]),e("div",we,[s[16]||(s[16]=e("div",{class:"phoneLabel"},"휴대폰 번호",-1)),r(e("input",{type:"",id:"phone","onUpdate:modelValue":s[4]||(s[4]=o=>u(_)?_.value=o:null),name:"phone",class:n(["nameInput",{"error-input":a($)}]),placeholder:"-없이 휴대폰 번호를 입력하세요."},null,2),[[d,a(_)]]),e("label",_e,p(a($)),1)]),s[17]||(s[17]=e("div",{class:"emailLabel"},"이메일 주소",-1)),e("div",Ce,[r(e("input",{type:"email",id:"email",name:"email",class:n(["emailInput",{"error-input":a(q)}]),placeholder:"이메일주소","onUpdate:modelValue":s[5]||(s[5]=o=>u(w)?w.value=o:null)},null,2),[[d,a(w)]]),e("label",ke,p(a(U).email),1)]),s[18]||(s[18]=e("div",{class:"addressLabel"},"주소 정보",-1)),e("div",ye,[e("div",Ue,[e("div",{id:"addressSearch",class:"postcodeInputBtn",onClick:R}," 주소검색 "),r(e("input",{type:"text",class:n(["addressInput",{"error-input":a(x)}]),id:"user_address","onUpdate:modelValue":s[6]||(s[6]=o=>u(h)?h.value=o:null),name:"user_address",placeholder:"주소",readonly:""},null,2),[[d,a(h)]])]),r(e("input",{type:"text",id:"user_detail_address",ref_key:"user_detail_address_input",ref:V,"onUpdate:modelValue":s[7]||(s[7]=o=>k.value=o),class:"detailedAddressInput",placeholder:"상세주소"},null,512),[[d,k.value]]),r(e("input",{type:"text",id:"user_total_address",name:"address","onUpdate:modelValue":s[8]||(s[8]=o=>l.address=o),style:{display:"none"}},null,512),[[d,l.address]]),e("label",fe,p(a(x)),1)]),s[19]||(s[19]=e("div",{class:"birthdateLabel"},"생년월일",-1)),r(e("input",{type:"date",id:"birthDate","onUpdate:modelValue":s[9]||(s[9]=o=>y.value=o),class:"birthdateInput",name:"birthDate",placeholder:"생년월일 6자리를 입력하세요."},null,512),[[d,y.value]]),e("div",Le,[e("input",{type:"radio",name:"gender",class:"hidden-input",checked:M.value,value:"M",id:"genderInputMan"},null,8,Me),e("div",{class:n(["genderMaleButton","genderBtn",{"checked-option":i.value==="M"}]),onClick:j}," Man ",2)]),e("div",Ve,[e("input",{type:"radio",name:"gender",class:"hidden-input",checked:M.value,value:"F",id:"genderInputWoman"},null,8,Be),e("div",{class:n(["genderFemaleButton","genderBtn",{"checked-option":i.value==="F"}]),onClick:Z}," Woman ",2)])],32)])])])}}},Ne=T(Ie,[["__scopeId","data-v-d3908a8c"]]);export{Ne as default};
