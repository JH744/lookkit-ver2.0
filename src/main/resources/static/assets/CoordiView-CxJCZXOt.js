import{_ as v,j as f,u as B,r as d,c as P,o as I,i as u,b as m,d as o,t as g,p,m as S,q as _,F as q,g as L,a as R,s as U,n as V}from"./index-C-LKCj6Z.js";import{h as $,a as k}from"./heart2-Da8ksjVI.js";import{d as E}from"./img_none-DejiioVZ.js";const T={class:"codi-item"},D=["src","alt"],F={class:"codi-info"},W={class:"codi-name"},j={class:"codi-price"},A=["src"],K={__name:"Coordi",props:{codiId:{type:Number,required:!0},codiName:{type:String,required:!0},codiPrice:{type:Number,required:!0},codiThumbnail:{type:String,required:!0},imageBaseUrl:{type:String,default:"https://firebasestorage.googleapis.com/v0/b/test-24a07.appspot.com/o/lookkit"}},setup(a){const s=f(),h=B(),i=$,n=k,t=d(!1),l=a,b=P(()=>{const e=`/codi/0${l.codiId}`,c=`/${l.codiId}_thumbnail.webp`,r=`${encodeURIComponent(e)}${encodeURIComponent(c)}`;return`${l.imageBaseUrl}${r}?alt=media`}),y=()=>{h.push(`/codi/${l.codiId}`)},C=e=>e.toLocaleString("ko-KR"),N=e=>{e.target.src=E},w=async e=>{console.log("코디 좋아요 추가");try{const c=await _.post("http://localhost:8081/api/main/coordi/wish/add",{userId:s.user.userId,codiId:e}).then(r=>{console.log("data",r)}).catch(r=>{console.log(r)});console.log("respnonse",c),t.value=!0}catch{}},x=async()=>{try{const e=await _.get(`http://localhost:8081/api/main/checkBatchCodi/${s.user.userId}/${l.codiId}`);t.value=e.data}catch(e){console.error("위시리스트 체크 중 오류 발생:",e)}};return I(()=>{s.isLoggedIn&&x()}),(e,c)=>(u(),m("div",T,[o("div",{class:"codi-image",onClick:y},[o("img",{src:b.value,alt:a.codiName,onError:N},null,40,D)]),o("div",F,[o("h3",W,g(a.codiName),1),o("p",j,g(C(a.codiPrice))+"원",1)]),o("div",null,[p(s).isLoggedIn?(u(),m("img",{key:0,src:t.value?p(i):p(n),class:"like-btn",onClick:c[0]||(c[0]=r=>w(a.codiId)),width:"20px",height:"20px",alt:""},null,8,A)):S("",!0)])]))}},M=v(K,[["__scopeId","data-v-0e0a5f82"]]),z={class:"page-container"},G={class:"title-section"},H={class:"sort-section"},J={class:"item-count"},O={class:"main-content"},Q={class:"product-list"},X={__name:"CoordiView",setup(a){f();const s=d([]);V(),d("https://firebasestorage.googleapis.com/v0/b/test-24a07.appspot.com/o/lookkit"),d($),d(k),d([]);const h=async()=>{try{const{data:i}=await R.get("/api/main/codis/all");console.log("리스트",i),s.value=i}catch(i){console.error("상품 데이터 조회 오류 발생:",i)}};return I(()=>{h()}),(i,n)=>(u(),m("div",z,[o("div",G,[n[0]||(n[0]=o("h1",{class:"title-text"},"전체 코디",-1)),n[1]||(n[1]=o("div",{class:"filter-section"},null,-1)),o("div",H,[o("div",J,"코디수: "+g(s.value.length)+"개",1)])]),o("div",O,[o("div",Q,[(u(!0),m(q,null,L(s.value,t=>(u(),U(M,{key:t.codiId,"codi-id":t.codiId,"codi-name":t.codiName,"codi-thumbnail":t.codiThumbnail,"codi-price":t.codiPrice},null,8,["codi-id","codi-name","codi-thumbnail","codi-price"]))),128))])])]))}},eo=v(X,[["__scopeId","data-v-1565239e"]]);export{eo as default};
