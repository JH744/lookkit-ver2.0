import{_ as $}from"./heart0-B8JIzpbZ.js";import{_ as b,j as M,r as i,c as Z,k as B,o as L,b as r,d as t,t as c,l as P,m as f,F as N,g as U,n as E,a as h,i as d,p as F}from"./index-Ph72PXlS.js";import{d as R}from"./img_none-DejiioVZ.js";import{h as S,a as q}from"./heart2-Da8ksjVI.js";const T="data:image/svg+xml,%3csvg%20width='12'%20height='12'%20viewBox='0%200%2012%2012'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M2.74446%209.5045V10.4987H0V9.5045H2.74446ZM5.50292%208.49633C5.63361%208.49633%205.75029%208.54768%205.85298%208.65036C5.95566%208.75304%206.007%208.86973%206.007%209.00042V11.0028C6.007%2011.1334%205.95566%2011.2501%205.85298%2011.3528C5.75029%2011.4555%205.63361%2011.5068%205.50292%2011.5068H3.50058C3.36989%2011.5068%203.25321%2011.4555%203.15053%2011.3528C3.04784%2011.2501%202.9965%2011.1334%202.9965%2011.0028V9.00042C2.9965%208.86039%203.04784%208.74371%203.15053%208.65036C3.25321%208.55701%203.36989%208.50567%203.50058%208.49633H5.50292ZM6.74912%205.49984V6.494H0V5.49984H6.74912ZM1.75029%201.49517V2.50334H0V1.49517H1.75029ZM12%209.5045V10.4987H6.24504V9.5045H12ZM4.49475%200.501002C4.63477%200.501002%204.75613%200.547676%204.85881%200.641026C4.96149%200.734374%205.00817%200.855727%204.99883%201.00509V2.99342C4.99883%203.13344%204.95216%203.25013%204.85881%203.34348C4.76546%203.43682%204.64411%203.48817%204.49475%203.4975H2.50642C2.36639%203.4975%202.24971%203.44616%202.15636%203.34348C2.06301%203.24079%202.01167%203.12411%202.00233%202.99342V1.00509C2.00233%200.865063%202.05368%200.743709%202.15636%200.641026C2.25904%200.538342%202.37573%200.491667%202.50642%200.501002H4.49475ZM9.50758%204.50567C9.63827%204.50567%209.75496%204.55234%209.85764%204.64569C9.96033%204.73904%2010.007%204.85573%209.99767%204.99575V6.99808C9.99767%207.13811%209.95099%207.25479%209.85764%207.34814C9.76429%207.44149%209.64761%207.49283%209.50758%207.50217H7.50525C7.36523%207.50217%207.24854%207.45083%207.15519%207.34814C7.06184%207.24546%207.0105%207.12877%207.00117%206.99808V4.99575C7.00117%204.86506%207.05251%204.74838%207.15519%204.64569C7.25788%204.54301%207.37456%204.49633%207.50525%204.50567H9.50758ZM12%205.49984V6.494H10.2497V5.49984H12ZM12%201.49517V2.50334H5.25087V1.49517H12Z'%20fill='%23101010'/%3e%3c/svg%3e",j="data:image/svg+xml,%3csvg%20width='11'%20height='6'%20viewBox='0%200%2011%206'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M10.0295%200.846319C10.0295%200.930348%209.99346%201.00237%209.92143%201.06239L5.23981%205.76202C5.17979%205.82204%205.10177%205.85205%205.00573%205.85205C4.9097%205.85205%204.83767%205.82204%204.78966%205.76202L0.108037%201.06239C0.0360125%201.00237%200%200.930348%200%200.846319C0%200.76229%200.0360125%200.684263%200.108037%200.612238L0.612212%200.108064C0.672233%200.0360384%200.744258%202.6226e-05%200.828287%202.6226e-05C0.912316%202.6226e-05%200.990343%200.0360384%201.06237%200.108064L5.00573%204.05143L8.9671%200.108064C9.02712%200.0360384%209.10515%202.6226e-05%209.20118%202.6226e-05C9.29722%202.6226e-05%209.36924%200.0360384%209.41726%200.108064L9.92143%200.612238C9.99346%200.672259%2010.0295%200.750286%2010.0295%200.846319Z'%20fill='%23101010'/%3e%3c/svg%3e",A={class:"page-container"},D={class:"title-section"},O={class:"filter-section"},z={key:0,class:"filter-dropdown"},G={class:"sort-section"},J={class:"item-count"},K={class:"main-content"},Q={class:"product-list"},W=["src"],X=["src","onClick"],Y={class:"product-info"},t0=["href"],e0={class:"brand-name"},s0={class:"product-name"},o0={class:"product-price-box"},l0={class:"product-price"},a0={__name:"CategoryView",setup(i0){const u=M(),n=i([]),m=E(),g=i(m.query.type),w=i("https://firebasestorage.googleapis.com/v0/b/test-24a07.appspot.com/o/lookkit"),y=i(S),V=i(q),a=i([]),_=i(""),p=i(!1),I=()=>{p.value=!p.value},v=s=>{_.value=s,p.value=!1,C()},k=s=>{s.target.src=R},C=async()=>{try{const{data:s}=await h.get("http://localhost:8081/api/main/category",{params:{type:g.value,sort:_.value}});n.value=s,console.log("리스트",s);const e=n.value.map(l=>l.productId),o=await h.post(`http://localhost:8081/api/main/checkBatch/${u.user.userId}`,e);a.value=o.data.wishlistItemIds,console.log("wishlistItemIds",a.value),n.value=n.value.map(l=>({...l,wishlist:a.value.includes(l.productId)}))}catch(s){console.error("상품 데이터 조회 오류 발생:",s)}},H=Z(()=>s=>{const e=`/products/0${s}`,o=`/${s}_thumbnail.webp`,l=`${encodeURIComponent(e)}${encodeURIComponent(o)}`;return`${w.value}${l}?alt=media`}),x=async s=>{try{const e=n.value.find(o=>o.productId===s);if(!e){console.error("상품을 찾을 수 없습니다:",s);return}if(a.value.includes(s)){console.log("찜삭제");const o=await h.post(`http://localhost:8081/api/main/wishlist/delete/${u.user.userId}`,{productId:s});a.value=a.value.filter(l=>l!==s),e.wishlist=!1,console.log("찜리스트:",a.value)}else{console.log("찜하기");const o=await h.post(`http://localhost:8081/api/mypage/wishlist/${u.user.userId}`,{productId:s});a.value.push(s),e.wishlist=!0}}catch(e){console.error("Error toggling like:",e)}};return B(()=>m.query.type,s=>{g.value=s,C()}),L(()=>{m.query.type=="all"&&console.log("모든상품조회"),C()}),(s,e)=>(d(),r("div",A,[t("div",D,[t("h1",null,c(g.value.toUpperCase()),1),t("div",O,[t("div",{class:"filter-btn",onClick:I},e[4]||(e[4]=[t("img",{src:T,alt:""},null,-1),P(" 필터검색 "),t("img",{src:j,alt:"",width:"10px"},null,-1)])),p.value?(d(),r("div",z,[t("ul",null,[t("li",{onClick:e[0]||(e[0]=o=>v("latest"))},"최신순"),t("li",{onClick:e[1]||(e[1]=o=>v("oldest"))},"오래된순"),t("li",{onClick:e[2]||(e[2]=o=>v("lowPrice"))},"낮은 가격순"),t("li",{onClick:e[3]||(e[3]=o=>v("highPrice"))},"높은 가격순")])])):f("",!0)]),t("div",G,[t("div",J,"상품 갯수: "+c(n.value.length)+"개",1)])]),t("div",K,[t("div",Q,[(d(!0),r(N,null,U(n.value,o=>(d(),r("div",{key:o.productId,class:"product-item"},[t("img",{class:"product-img",src:H.value(o.productId),alt:"상품썸네일",onError:k},null,40,W),F(u).isLoggedIn?(d(),r("img",{key:0,src:o.wishlist?y.value:V.value,class:"like-btn",alt:"좋아요버튼",onClick:l=>x(o.productId)},null,8,X)):f("",!0),t("div",Y,[t("a",{href:`/product/${o.productId}`},[t("div",e0,c(o.brandName),1),t("div",s0,c(o.productName),1)],8,t0),t("div",o0,[t("div",l0,c(o.productPrice)+"원",1)]),e[5]||(e[5]=t("div",{class:"like-box"},[t("img",{src:$,alt:"",width:"20px",height:"20px"}),t("span",null,"120")],-1)),e[6]||(e[6]=t("div",{class:"product-event"},[t("div",{class:"product-event-box"},[t("div",null,"대여가능")])],-1))])]))),128))])])]))}},u0=b(a0,[["__scopeId","data-v-f5007b2f"]]);export{u0 as default};
